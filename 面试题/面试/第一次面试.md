## 第一次面试

### 八股文

先从项目开始的，刚开始聊了一下怎么学习java的，学习方式：

>hdfs中存的是什么，小文件存在哪里？

小文件压缩

>redis实现点赞和排行榜怎么做的？具体的数据结构

**zset数据结构**

***SortedSet（zset）***是 ***Redis*** 提供的一个非常特别的数据结构，一方面它等价于 ***Java*** 的数据结构 ***Map<String, Double>***，可以给每一个元素 ***value*** 赋予一个权重 ***score***，另一方面它又类似于 ***TreeSet***，内部的元素会按照权重 ***score*** 进行排序，可以得到每个元素的名次，还可以通过 ***score*** 的范围来获取元素的列表。

***zset*** 底层使用了两个数据结构

- ***hash***，***hash*** 的作用就是关联元素 ***value*** 和权重 ***score***，保障元素 ***value*** 的唯一性，可以通过元素 ***value*** 找到相应的 ***score*** 值
- 跳跃表，跳跃表的目的在于给元素 ***value*** 排序，根据 ***score*** 的范围获取元素列表

>接口幂等性如何保证的，为什么用zookeeper分布式锁保证幂等性，怎么实现的？我回答了一点点，又问这样效率高吗？（面试官觉得这种做法不好）怎么优化? 

这样是将所有的请求串行化了，效率并不高

>zookeeper选举过程，详细说一下



>你刚才讲redis数据是存在内存中的，那么zk的数据存在哪里？磁盘还是内存？我答了内存又问那么zk的数据持久化怎么做的，会不会丢数据？和redis持久化的异同

zk数据是存在内存中的，然后也有类似于redis的内存快照和事物日志的持久化策略

>说一下常用的二叉树，红黑树和AVL树的那个更好？为什么，说一下各自的时间、空间复杂度



>HashMap桶的位置是怎么找到的？为什么用 & 不用 % ，为什么是(length - 1)，为什么要右移32位(一半)



>HashMap添加删除查询的时间复杂度和空间复杂度？你刚才说基于数组的，那么ArrayList的呢？



### 算法题

>一个任意长度的数组，里面装了任意个数字，数字可能是正数、负数和0，就该数组的子数组中积最大的子数组（前提是子数组中数据是连续的，不能跳跃）

动态规划：

```java

```

暴力破解（会超时）：

```java
public int maxAbsoluteSum(int[] nums) {
    int maxNum = 0;
    for (int i = 0; i < nums.length; i++) {
        int cnt = 0;
        for (int j = i; j < nums.length; j++) {
            cnt = cnt + nums[j];
            maxNum = Math.max(maxNum, Math.abs(cnt));
        }
    }
    return maxNum;
}
```

>两张表，用户表和关系表，用户表中有用户id，关系表中有用户的朋友id，查出朋友最多的前十个用户并输出信息

```sql
select * from user where uid in(
	select uid from (
    	select u.uid,count(1) cnt from user u,relationship r where u left join r group by u.uid
    ) order by cnt desc
) limit 10;
```

















