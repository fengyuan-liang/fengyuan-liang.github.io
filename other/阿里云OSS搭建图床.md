# gitee图床被封！阿里云OSS搭建图床

最近，打开自己的`markdowm`笔记，然后发现：

![image-20220325204244891](https://s2.loli.net/2022/03/25/O7R16hyS8jVwvXY.png)

我？？？？？？？？？？？？？？？？？？？？？？我图片呢？？？？？？？？？？？？？？？？？？？？？？？？？？？？？

<img src="https://img-blog.csdnimg.cn/img_convert/4ac2a1564350e91b2ff5d07a8b19d3d2.png">

打开picGO

![image-20220325204952732](https://s2.loli.net/2022/03/25/nvu4VHFUXzl9hLo.png)

我的图片怎么全部变成这种东西了，我是用`gitee`搭建的图床，怎么现在不好使了！！！！！前段时间有个朋友`gitee`被封了，说什么用`Gitee`搭建图床盗链太多，我还嘲笑他，现在小丑🤡变成我自己了！

![image-20220325205348718](https://s2.loli.net/2022/03/25/ftuJc13SXQ6LZO2.png)

>痛定思痛，我冷静下来思考了一会，发现不能再用这些免费图床了，都不好使，我要付费！！！！！如果付费可以挽救我以前的图片的话我一定会付费，为自己这些年的白嫖买单😭😭😭，可惜就像错过当初那个女孩一样，没有如果😭😭😭

## 1. 购买阿里云oss对象存储服务

先去官网购买一下，一年也花不了多少钱，那些免费的图床总感觉用着不踏实，那可是我辛辛苦苦做的笔记鸭，虽然没几个人看，但是也不能说没了就没了！！😭😭😭

购买地址：<a href="https://www.aliyun.com/product/oss/">阿里云oss</a>                  给我买！！！花钱，赶快，又不是没有这个实力，不就是几块钱嘛😤😤😤

<img src="https://s2.loli.net/2022/03/25/PGdFjpaOBVLlRWZ.png"/>

>这里由两种计费方式

- 第一种是`按量收费`，只需要开通`OSS`即可，然后就完事了（`默认是第一种方式”按量收费“`），就可以直接用OSS服务了，不需要付款什么的，按量收费，从我们的阿里云账户直接扣钱，边用边扣的模式。这种访问量不大的话也花不了多少钱
- 还有一种是”买套餐包月包年“，需要我们到页面付款一次结清，有活动的时候经常`几块钱一年40G空间`

我这里包年包月哈（因为我的图片比较多），毕竟钱也不是大风刮来的，能省还是得省着点😣，我这里还是包年包月吧

**但是如果只用来放博客得图片得话，按量计费更好，一般不会耗费多少钱，有的时候还会抹零！！挺好的**😘

![image-20220325211428804](https://s2.loli.net/2022/03/25/UxGEbNMXwOBKn1e.png)

如果你和我一样选择了`包月包年`，那么就选一个规格吧，最好服务器地点选择一下

![image-20220325211738033](https://s2.loli.net/2022/03/25/cjpyFIUV7eiAnug.png)

当然oss还可以进行生产级别得数据存储，详细和更多操作请看官网介绍：<a href="https://oss.console.aliyun.com/bucket">阿里云oss官网详情</a>      

空间买好后，大家不要以为我们怎么折腾，一年都只要几块钱，这只是存储空间的钱，还没算流量的钱，亲身事件，如果开启CDN加速后流量的钱甚至还会超过存储的钱，不过也还好，也就几块钱

**开通后会自动进入管理控制台，点击左边列表里面的Bucket 列表**

## 2. 新建OSS Bucket

Bucket的作用就类似于互联网上的一个空间，你可以建很多个Bucket，拥有不同的空间，这个空间你可以存任何数据进去，这些数据互相没有任何联系。值得注意的是`Bucket的名字要好好取`，因为后面访问的路径会带，而且Bucket必须`全网唯一`，不能重复，`且创建后就不能修改了`

这里要注意的是`Bucket一定要设置为公共读`，不然访问不了

<img src="https://s2.loli.net/2022/03/25/Z9RF6rkEP2OhtJ7.png" style="zoom:70%"/>

**创建bucket之后，我们的存储空间就创建成功了。**

我们先在bucket创建一个文件夹然后放张图上去，然后看下能不能用

然后你就会发现**不能用！！！**，他会默认下载而不是查看，看下官方解释

![image-20220325214520361](https://s2.loli.net/2022/03/25/cO2oWVY1zSLN6ns.png)

>没事我们用域名绑定一个就好，谁还没有个域名了，没有的同学可以在阿里云在注册一个，备案虽然麻烦了点，但是谁不想拥有一个自己的域名呢，如果感觉很复杂的话可以用免费图床哈，后面还有一些设置，但是我现在铁了❤要付费

## 3. 配置OSS资源访问域名

建议弄一个子域名作为自己的静态资源访问

![image-20220325215212048](https://s2.loli.net/2022/03/25/WjrvBnSI749ZAe1.png)

<img src="https://s2.loli.net/2022/03/25/crMSBa2Y1uVo5wt.png" style="zoom:70%">

这里再申请一个免费的证书，用来做`https`访问，不申请也没关系，但是我这里直接一部到位

位置在    **数字证书管理服务>SSL 证书**

<img src="https://s2.loli.net/2022/03/25/wqoyRY9I3Burtz8.png" style="zoom:70%"/>

**下载nginx的证书（阿里云域名不用下载，后面可以自动识别）**

![image-20220325221342400](https://s2.loli.net/2022/03/25/5fGi6CP9UnqYaSZ.png)

**回到OSS控制台**

1. 单击**Bucket列表**，然后单击目标Bucket名称
2. 单击**传输管理** > **域名管理**
3. 单击**绑定域名**
4. 在**绑定域名**面板，输入要绑定的**域名**。

<img src="https://s2.loli.net/2022/03/25/ilcA8kZeQ5wNSyC.png" style="zoom:70%">

添加好域名后将刚刚下载的证书添加进去，阿里云证书会自动感应，不用添加，选择一下证书名称就好，如果没有名称的手动添加一下

<img src="https://s2.loli.net/2022/03/25/u6CLPAUfJ3Rcm4j.png" style="zoom:70%">



确认好就配置好后，如果有余力的同学可以再配置一下`cdn加速`，这样访问会快一些

然后返回就可以发现图片能够正常访问了！！！

<img src="https://s2.loli.net/2022/03/25/6egTci1kfEZpwnb.png" style="zoom:70%">



## 4. 配置picGO

费劲九牛二虎之力终于要到设置图床的地方了

<img src="https://s2.loli.net/2022/03/25/GBsQuoLjvpz1edX.png" style="zoom:70%">

- 这里的`accesskey`和`accesskeySecret`可以从阿里云控制台获取（鼠标移至阿里云你的头像上，可以发现Accesskey管理，创建一个）
- 存储空间和你刚才创建Bucket时使用同一个，可以从阿里云OSS控制台上复制，以免手贱打错字
- 存储区域在阿里云OSS控制台概览里面去找，如下图所示

<img src="https://s2.loli.net/2022/03/25/LqdE5m78HAypeYS.png" style="zoom:70%">

**填到里面后你的图床就可以继续使用了，但是要注意这里有个大坑！！！！！！！！！！！！！！！！！！**

`就是复制过来的KeyId 首位默认增加了一个空格`，这里一定要注意！！！！！keysecret也可能有，都检测下，又浪费我一个下午😭

<img src="https://cdn.fengxianhub.top/resources-master/202203252254635.png" style="zoom:70%">

其实付费也挺好的，你不管往里面存什么都可以，还不限大小，想想之前gitee只能上传1m、sm.ms只能上传5m，但是我经常弄一些gif动不动就是几十M，现在再也不用担心了，我付钱了想怎么存就怎么存

## 4. 将gitee图床图片迁移到OSS中

我的做法很原始，先去gitee上把之前的图片拉下来再上传到自己的oss中

![image-20220325223653331](https://cdn.fengxianhub.top/resources-master/202203252251834.png)



**然后把自己文章里面的所有gitee的域名换成自己的，全选一下就可以了，文章不多的话一下就弄好了**









